# issue #2 入力で「左 + ア + 必」 のとき左か右かがパッと見てわかりづらい #2
[issues #2](https://github.com/cat2151/fighting-game-button-challenge/issues/2)

# なにが問題？
- playerが混乱する
- 練習不足になる。この例だと本質的に練習したいのは、「脳が認識してから」「ボタンを押すまで」の「時間を最小化」という練習である。
  - つまり「左右の見間違いを防止する練習」はまったく不要であり、トータルの練習の邪魔である。
    - 視認性が悪いので視認性をよくするべき、とも言える。

# ブレインストーミング
## 分析
- 視認性が悪いのは「左下」「右下」「左」「右」「左上」「右上」という表示のせい
- よって、それらを、まったく別の視認性の良い文字列「1」「3」「4」「6」「7」「9」に置換表示するとよさげ
## alias機能
- 左 右 を 4 6 に置換して表示する
- alias.toml を用意し、そこで、左 右 を 4 6 に置換とする
- 置換する処理は、displayの処理において、とする
- mission.tomlと関連処理は影響なし、とする
## font
- aliasを、tomlによるfont指定（現在できる）と組み合わせる
- これにより、見て反応しやすいグラフィカルな方向指定やボタン指定ができるか、を検証するとよさげ
- fontは、別issueに切り分けたほうがよいだろう。つまり issue #2 においては、aliasのみを扱おう

# LLMに可視化させる、認知負荷を下げる
- プロンプト「外部仕様の案、内部仕様の案、変更のある関数のlist、を箇条書きでまとめ、md末尾に追記してください」

---

## 外部仕様の案
- 入力表示で「左」「右」などの方向を、数字（例:「4」「6」）に置換して表示できる
- 置換ルールは alias.toml でユーザーが編集可能
- 置換表示は設定でON/OFF切り替え可能

## 内部仕様の案
- alias.toml を読み込み、方向やボタン名の置換マップを生成
- 入力表示処理（display処理）で、表示前に置換マップを適用
- mission.toml等、他の設定ファイルやロジックには影響を与えない
- 設定で置換表示の有効/無効を切り替えられるようにする

## 変更のある関数のlist
- 入力表示用の display 関数
- alias.toml 読み込み処理
- 設定管理（config）関連の関数
- （必要に応じて）初期化処理や設定反映処理

# 上記をレビューした所感
- 補足。on/offもtomlで1行で制御する。on固定よりも、testがしやすい、使いやすい。
- あとはOK

# agentに実装させてみよう
- プロンプト「実装してみてください」
- 結果、alias.tomlの生成の途中で指示待ちになった
    - その内容自体はちょっと追加指示すればなおりそう
- 対策、切り分ける。alias.tomlだけ書かせて、指示して仕上げるところまで一歩ずつやらせる
    - プロンプト「alias.tomlを書いてみてください。イメージは、1つの変換につき、変換元ボタン名、変換後ボタン名、の2要素配列です。そして、それが10個～20個の配列として並びます。tomlの配列（list）の書き方の「[[～]]」を利用してください。」
- 結果、alias.tomlはできた。

# agentに実装させてみよう
- プロンプト「実装してみてください」
- 結果、破綻。仮説、contextあふれ。対策、具体的なソース名と関数名をlistさせる。プロンプト「変更するソース名と関数名をlistしてください」
- 結果、utils.pyが突然登場。想定はconfigs.pyなので混乱。実際、前述でconfigは登場している。対策、button_challege.tomlにalias.tomlとの紐付けを記述。これはほかのtomlを参考にしたもの。ついでにconfigs.pyに、TODOコメントとして指示を記載した。
    - 結局人間が考えている
- プロンプト「実装してみてください。configs.pyのTODOコメントを参照してください。readしたaliasは、update_display_with_missionにわたしてください。update_display_with_missionの内部で、alias関数を呼び出してください。alias関数は最初はガワだけでいいです。」
- 結果、いくつか手直しはさせたが、できている、test green
- プロンプト「#2 の作業の流れ、つまりこのmdの内容を、箇条書きでまとめてください。用途は、今後よりよい進め方をするためのヒント用です」
- 結果、まとめは出たが長いし、いらない（とっくにわかりきっている）ものが多い。userが削る

# 今後のための振り返り
- 課題、破綻。
    - 対策、実装プロンプトを段階的に分割
        - まず alias.toml のみを作成させる
        - その後、実装を進めさせる
- 課題、破綻。
    - 対策、具体的なソース名・関数名をリストアップさせる
- 課題、想定外のファイルや関数が登場。
    - 対策、userがソースのおおまかな調査をして、TODOコメントで補足し、プロンプトをより具体的に記述
